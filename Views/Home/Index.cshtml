@model JournalViewModel
@{
    ViewData["Title"] = "Home Page";
}

<form method="post" enctype="multipart/form-data" asp-controller="Home" asp-action="Upload">

    <div class="form-group">
        <label for="file-input">Upload log file using this form: </label>
        <input type="file" name="file" id="file-input"/>
    </div>
    
    <input type="submit" class="btn btn-default" value="Upload" />
    
</form>
@if(Model != null && Model.Hosts.Any())
{
    <hr>
    
    <div class="table-responsive">
        <table class="table table-condensed table-striped table-bordered table-hover" id="journal">
            <thead>
                <tr>
                    <th>Host IP</th>
                    <th>Host Name</th>
                    <th>Org</th>
                    <th>Type</th>
                    <th>Code</th>  
                    <th>DateTime</th>
                    <th>Path</th>
                    <th>File</th>
                    <th>Bytes</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var host in Model.Hosts)
                {
                    
                        @foreach(var request in host.Requests)
                        {
                            <tr>
                            
                                <td>@host.IpAddress</td>
                                <td>@host.HostName</td>
                                <td>@host.OrgName</td>
                                <td>@request.RequestType</td>
                                <td>@request.ResponseStatusCode</td>
                                <td>@request.DateTimeRequested</td>
                                <td>@request.FilePath</td>
                                <td>@request.FileName</td>
                                <td>@request.BytesSent</td>
                            </tr>
                        }
                }
            </tbody>
        </table>
    </div>
}
else 
{
    <h1>Journal is empty</h1> 
}

@section scripts {
    
    <script>
        $(document).ready(function() {
            $('#journal').DataTable();
        });
    </script>
}